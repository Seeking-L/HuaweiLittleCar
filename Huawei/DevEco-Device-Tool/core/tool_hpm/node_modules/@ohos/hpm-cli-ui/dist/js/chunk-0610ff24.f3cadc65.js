(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0610ff24"],{"0315":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"hpm-configuration"},[s("el-tabs",{attrs:{"before-leave":e.beforLeave},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[s("el-tab-pane",{attrs:{label:e.$t("core.setting.defaultSet"),name:"defaultSetting"}},[s("defaultSetting",{ref:"defaultSetting",attrs:{defaultSetting:e.hpmConfig}})],1),s("el-tab-pane",{attrs:{label:e.$t("core.setting.userSet"),name:"userSetting"}},[s("userSetting",{ref:"userSetting",attrs:{userSettingList:e.userSettingList},on:{addConfig:e.addConfig,deleteSuccess:e.deleteSuccess,cancelConfig:e.cancelConfig,saveConfig:e.saveConfig,editConfig:e.editConfig,isValid:e.isValid}})],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:"defaultSetting"===e.activeName,expression:"activeName === 'defaultSetting'"}],staticClass:"saveBtn"},[s("el-button",{staticClass:"w-100",attrs:{type:"primary",size:"medium"},on:{click:e.saveDefault}},[e._v(e._s(e.$t("core.common.save")))])],1)],1)},n=[],a=s("c7eb"),o=s("1da1"),l=s("5530"),c=(s("d3b7"),s("d81d"),s("4de4"),s("4fad"),s("caad"),s("2532"),s("a434"),s("159b"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"default-setting"},[s("ul",[s("li",[s("span",{staticClass:"label_en"},[e._v("registry")]),s("span",{staticClass:"label_ch"},[e._v(e._s(e.$t("core.setting.description.registry")))]),s("el-input",{model:{value:e.cloneObj.registry,callback:function(t){e.$set(e.cloneObj,"registry",t)},expression:"cloneObj.registry"}})],1),s("li",[s("span",{staticClass:"label_en"},[e._v("shellPath")]),s("div",{staticClass:"label-box"},[s("span",{staticClass:"label_ch"},[e._v(e._s(e.$t("core.setting.description.shellPath")))]),s("svg-icon",{staticClass:"path-icon",attrs:{name:"folder",size:20},on:{click:function(t){return e.openFileListDialog("shellPath")}}})],1),s("el-input",{model:{value:e.cloneObj.shellPath,callback:function(t){e.$set(e.cloneObj,"shellPath",t)},expression:"cloneObj.shellPath"}})],1),s("li",[s("span",{staticClass:"label_en"},[e._v("loginUser")]),s("span",{staticClass:"label_ch"},[e._v(e._s(e.$t("core.setting.description.loginUser")))]),s("el-input",{model:{value:e.cloneObj.loginUser,callback:function(t){e.$set(e.cloneObj,"loginUser",t)},expression:"cloneObj.loginUser"}})],1),s("li",[s("span",{staticClass:"label_en"},[e._v("cacheExpiration")]),s("span",{staticClass:"label_ch"},[e._v(e._s(e.$t("core.setting.description.cacheExpiration")))]),s("el-input",{attrs:{min:1,placeholder:"180"},on:{input:function(t){return e.numberChange(t)}},model:{value:e.cloneObj["cache-expiration"],callback:function(t){e.$set(e.cloneObj,"cache-expiration",e._n(t))},expression:"cloneObj['cache-expiration']"}})],1),s("li",[s("span",{staticClass:"label_en"},[e._v("globalRepo")]),s("span",{staticClass:"label_ch"},[e._v(e._s(e.$t("core.setting.description.globalRepo")))]),s("el-input",{model:{value:e.cloneObj.globalRepo,callback:function(t){e.$set(e.cloneObj,"globalRepo",t)},expression:"cloneObj.globalRepo"}})],1),s("li",[s("span",{staticClass:"label_en"},[e._v("http_proxy")]),s("div",{staticClass:"label-box"},[s("span",{staticClass:"label_ch"},[e._v(e._s(e.$t("core.setting.description.http_proxy")))]),s("svg-icon",{directives:[{name:"show",rawName:"v-show",value:e.showPassword.http_proxy,expression:"showPassword.http_proxy"}],staticClass:"eye-icon",attrs:{name:"lineEye",size:20},on:{click:function(t){return e.toggleShowPassword("http_proxy")}}}),s("svg-icon",{directives:[{name:"show",rawName:"v-show",value:!e.showPassword.http_proxy,expression:"!showPassword.http_proxy"}],staticClass:"eye-icon",attrs:{name:"eye",size:20},on:{click:function(t){return e.toggleShowPassword("http_proxy")}}})],1),s("el-input",{class:{input_psd:e.showPassword.http_proxy},attrs:{type:e.showPassword.http_proxy?"password":"text"},model:{value:e.cloneObj.http_proxy,callback:function(t){e.$set(e.cloneObj,"http_proxy",t)},expression:"cloneObj.http_proxy"}})],1),s("li",[s("span",{staticClass:"label_en"},[e._v("https_proxy")]),s("div",{staticClass:"label-box"},[s("span",{staticClass:"label_ch"},[e._v(e._s(e.$t("core.setting.description.https_proxy")))]),s("svg-icon",{directives:[{name:"show",rawName:"v-show",value:e.showPassword.https_proxy,expression:"showPassword.https_proxy"}],staticClass:"eye-icon",attrs:{name:"lineEye",size:20},on:{click:function(t){return e.toggleShowPassword("https_proxy")}}}),s("svg-icon",{directives:[{name:"show",rawName:"v-show",value:!e.showPassword.https_proxy,expression:"!showPassword.https_proxy"}],staticClass:"eye-icon",attrs:{name:"eye",size:20},on:{click:function(t){return e.toggleShowPassword("https_proxy")}}})],1),s("el-input",{class:{input_psd:e.showPassword.https_proxy},attrs:{type:e.showPassword.https_proxy?"password":"text"},model:{value:e.cloneObj.https_proxy,callback:function(t){e.$set(e.cloneObj,"https_proxy",t)},expression:"cloneObj.https_proxy"}})],1),s("li",[s("span",{staticClass:"label_en"},[e._v("no_proxy")]),s("span",{staticClass:"label_ch"},[e._v(e._s(e.$t("core.setting.description.no_proxy")))]),s("el-input",{model:{value:e.cloneObj.no_proxy,callback:function(t){e.$set(e.cloneObj,"no_proxy",t)},expression:"cloneObj.no_proxy"}})],1),s("li",[s("span",{staticClass:"label_en"},[e._v("ignoreBundles")]),s("span",{staticClass:"label_ch"},[e._v(e._s(e.$t("core.setting.description.ignoreBundles")))]),s("el-input",{model:{value:e.cloneObj.ignoreBundles,callback:function(t){e.$set(e.cloneObj,"ignoreBundles",t)},expression:"cloneObj.ignoreBundles"}})],1),s("li",[s("span",{staticClass:"label_en"},[e._v("modelRepository")]),s("div",{staticClass:"label-box"},[s("span",{staticClass:"label_ch"},[e._v(e._s(e.$t("core.setting.description.modelRepository")))]),s("svg-icon",{staticClass:"path-icon",attrs:{name:"folder",size:20},on:{click:function(t){return e.openFileListDialog("modelRepository")}}})],1),s("el-input",{model:{value:e.cloneObj.modelRepository,callback:function(t){e.$set(e.cloneObj,"modelRepository",t)},expression:"cloneObj.modelRepository"}})],1),s("li",[s("span",{staticClass:"label_en"},[e._v("OSPlatform")]),s("span",{staticClass:"label_ch"},[e._v(e._s(e.$t("core.setting.description.OSPlatform")))]),s("el-select",{staticClass:"osPlatForm",attrs:{placeholder:e.$t("core.common.choose")},model:{value:e.cloneObj.OSPlatform,callback:function(t){e.$set(e.cloneObj,"OSPlatform",t)},expression:"cloneObj.OSPlatform"}},e._l(e.osPlatFormOptions,(function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),s("li",[s("span",{staticClass:"label_en"},[e._v("batchDownloadLimit")]),s("span",{staticClass:"label_ch"},[e._v(e._s(e.$t("core.setting.description.batchDownloadLimit")))]),s("el-input-number",{attrs:{min:1,max:10},model:{value:e.cloneObj.batchDownloadLimit,callback:function(t){e.$set(e.cloneObj,"batchDownloadLimit",t)},expression:"cloneObj.batchDownloadLimit"}})],1),s("li",[s("span",{staticClass:"label_en"},[e._v("restoreCodeSegment")]),s("span",{staticClass:"label_ch"},[e._v(e._s(e.$t("core.setting.description.restoreCodeSegment")))]),s("el-switch",{model:{value:e.cloneObj.restoreCodeSegment,callback:function(t){e.$set(e.cloneObj,"restoreCodeSegment",t)},expression:"cloneObj.restoreCodeSegment"}})],1),s("li",[s("span",{staticClass:"label_en"},[e._v("strictSsl")]),s("span",{staticClass:"label_ch"},[e._v(e._s(e.$t("core.setting.description.strictSsl")))]),s("el-switch",{model:{value:e.cloneObj.strictSsl,callback:function(t){e.$set(e.cloneObj,"strictSsl",t)},expression:"cloneObj.strictSsl"}})],1),s("li",[s("span",{staticClass:"label_en"},[e._v("privateSupport")]),s("span",{staticClass:"label_ch"},[e._v(e._s(e.$t("core.setting.description.privateSupport")))]),s("el-switch",{model:{value:e.cloneObj.privateSupport,callback:function(t){e.$set(e.cloneObj,"privateSupport",t)},expression:"cloneObj.privateSupport"}})],1),s("li",[s("span",{staticClass:"label_en"},[e._v("ignoreLicenseCheck")]),s("span",{staticClass:"label_ch"},[e._v(e._s(e.$t("core.setting.description.ignoreLicenseCheck")))]),s("el-switch",{model:{value:e.cloneObj.ignoreLicenseCheck,callback:function(t){e.$set(e.cloneObj,"ignoreLicenseCheck",t)},expression:"cloneObj.ignoreLicenseCheck"}})],1)]),s("searchFileDialog",{ref:"searchFileDialog",on:{openFolder:e.openFolder}})],1)}),r=[],u=s("ade3"),d=(s("ac1f"),s("1276"),s("b0c0"),s("1706")),p=s("bc1a"),h=s("10f4"),f=s("3f14"),g=s("2f62"),m={name:"default-setting",components:{searchFileDialog:d["a"]},props:{defaultSetting:{type:Object,default:function(){return null}}},watch:{defaultSetting:{handler:function(e){this.cloneObj=Object(l["a"])(Object(l["a"])({},this.cloneObj),this.defaultSetting)}}},data:function(){return{cloneObj:{batchDownloadLimit:4,OSPlatform:"Auto",restoreCodeSegment:!0,modelRepository:"","cache-expiration":180},settingApi:new h["SettingApi"],osPlatFormOptions:p["d"].OS_PLAT_FORM_OPTIONS,showPassword:{http_proxy:!0,https_proxy:!0},fileKey:""}},methods:Object(l["a"])(Object(l["a"])({},Object(g["c"])({setHpmConfig:f["d"]})),{},{saveDefault:function(){var e=this;this.settingApi.saveConfig(this.cloneObj).then((function(t){e.$message({message:e.$t("core.common.saveSuccess"),type:"success"}),e.setHpmConfig(e.cloneObj)}))},openFileListDialog:function(e){this.fileKey=e,this.$refs.searchFileDialog.openDialog()},openFolder:function(e,t,s){var i=this,n={shellPath:i.keyToShellPath,modelRepository:i.keyToModelRepository};n[this.fileKey](e,t,s)},keyToShellPath:function(e,t,s){var i=s.name.split(".").pop().toLowerCase();"exe"!==i?this.$message({message:this.$t("core.setting.msg.exeFile"),type:"warning"}):(this.cloneObj.shellPath=t+"/"+s.name,this.$refs.searchFileDialog.cancel())},keyToModelRepository:function(e,t,s){this.cloneObj.modelRepository=t,this.$refs.searchFileDialog.cancel()},toggleShowPassword:function(e){this.showPassword=Object(l["a"])(Object(l["a"])({},this.showPassword),{},Object(u["a"])({},e,!this.showPassword[e]))},numberChange:function(e){this.cloneObj["cache-expiration"]=Math.min(parseInt(e))||""}})},b=m,v=(s("0bc6"),s("2877")),_=Object(v["a"])(b,c,r,!1,null,"50397e72",null),w=_.exports,y=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"user-setting"},[s("div",{staticClass:"tableBox",attrs:{id:"tableBox"}},[s("el-table",{attrs:{data:e.userSettingList,"header-cell-class-name":"t-label","cell-class-name":"t-cell","max-height":"590"}},[s("el-table-column",{attrs:{prop:"key",label:e.$t("core.common.key"),"min-width":"1","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isModified?s("div",{class:["edit",{isValid:t.row.isKeyValid||t.row.isValueValid}]},[s("el-form",{ref:"keyForm"+t.$index,staticClass:"demo-ruleForm",attrs:{model:t.row,"label-width":"0px","validate-on-rule-change":!1}},[s("el-form-item",{attrs:{prop:"key",rules:[{validator:e.validateKey,trigger:"change",id:t.$index}]}},[s("el-input",{model:{value:t.row.key,callback:function(s){e.$set(t.row,"key","string"===typeof s?s.trim():s)},expression:"scope.row.key"}})],1)],1)],1):s("div",[e._v(" "+e._s(t.row.key)+" ")])]}}])}),s("el-table-column",{attrs:{prop:"value",label:e.$t("core.common.value"),"min-width":"2","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isModified?s("div",{class:["edit",{isValid:t.row.isKeyValid||t.row.isValueValid}]},[s("el-form",{ref:"valueForm"+t.$index,staticClass:"demo-ruleForm",attrs:{model:t.row,"label-width":"0px","validate-on-rule-change":!1}},[s("el-form-item",{attrs:{prop:"value",rules:[{validator:e.validateValue,trigger:"change",id:t.$index}]}},[s("el-input",{model:{value:t.row.value,callback:function(s){e.$set(t.row,"value","string"===typeof s?s.trim():s)},expression:"scope.row.value"}})],1)],1)],1):s("div",[e._v(" "+e._s(t.row.value)+" ")])]}}])}),s("el-table-column",{attrs:{label:e.$t("core.common.operate"),width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{directives:[{name:"show",rawName:"v-show",value:!t.row.isModified,expression:"!scope.row.isModified"}],staticClass:"edit-box"},[s("svg-icon",{staticClass:"icon",attrs:{name:"edit",size:14},on:{click:function(s){return e.editConfig(t.row.key,t.$index)}}}),s("svg-icon",{staticClass:"icon",attrs:{name:"delete",size:14},on:{click:function(s){return e.deleteConfig(t.row,t.$index)}}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.row.isModified,expression:"scope.row.isModified"}],staticClass:"save-box"},[s("svg-icon",{staticClass:"icon cancel",attrs:{name:"cancel",size:18},on:{click:function(s){return e.cancelConfig(t.$index)}}}),s("svg-icon",{staticClass:"icon",attrs:{name:"confirm",size:18},on:{click:function(s){return e.confirmConfig(t.row,t.$index)}}})],1)]}}])})],1)],1),s("div",{staticClass:"add-row"},[s("svg-icon",{staticClass:"icon-add-row",attrs:{name:"add"},on:{click:e.addConfig}}),s("span",{on:{click:e.addConfig}},[e._v(e._s(e.$t("core.setting.addConfig")))])],1)])},C=[],O=(s("3ca3"),s("ddb0"),s("d9e2"),{name:"user-setting",props:{userSettingList:{type:Array,default:function(){return[]}}},computed:{configKeys:function(){return this.userSettingList.length?this.userSettingList.filter((function(e){return!e.isModified})).map((function(e){return e.key})):[]}},data:function(){return{settingApi:new h["SettingApi"]}},methods:{addConfig:function(){this.$emit("addConfig")},editConfig:function(e,t){this.$emit("editConfig",t)},cancelConfig:function(e){this.$emit("cancelConfig",e)},deleteConfig:function(e,t){var s=this,i=e.key,n=e.value,a=this.$t("core.setting.msg.deleteInfo",{key:"'".concat(i,"'"),value:"'".concat(n,"'")});this.$confirm(a,{closeOnClickModal:!1,type:"warning"}).then((function(){s.confirmDeleted(i,t)})).catch((function(){}))},confirmDeleted:function(e,t){var s=this;this.settingApi.deleteConfig([e]).then((function(i){200===i.code&&(s.$message({message:s.$t("core.common.deleteSuccess"),type:"success"}),s.$emit("deleteSuccess",e,t))}))},confirmConfig:function(e,t){var s=this;return Object(o["a"])(Object(a["a"])().mark((function i(){var n;return Object(a["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,Promise.all([s.asyncValidate("valueForm"+t),s.asyncValidate("keyForm"+t)]);case 2:n=i.sent,n.every((function(e){return e}))&&s.$emit("saveConfig",Object(u["a"])({},e.key,e.value),t);case 4:case"end":return i.stop()}}),i)})))()},asyncValidate:function(e){var t=this;return new Promise((function(s,i){try{t.$refs[e].validate((function(e){s(e)}))}catch(n){i(n)}}))},validateValue:function(e,t,s){""===t?(this.$emit("isValid",e.id,"isValueValid",!0),s(new Error(this.$t("core.setting.errMsg.value")))):(this.$emit("isValid",e.id,"isValueValid",!1),s())},validateKey:function(e,t,s){""===t?(this.$emit("isValid",e.id,"isKeyValid",!0),s(new Error(this.$t("core.setting.errMsg.key")))):this.configKeys.includes(t)?(this.$emit("isValid",e.id,"isKeyValid",!0),s(new Error(this.$t("core.setting.errMsg.dupKey")))):(this.$emit("isValid",e.id,"isKeyValid",!1),s())}}}),S=O,x=(s("15b2"),Object(v["a"])(S,y,C,!1,null,"570cc046",null)),j=x.exports,$={name:"hpm-configuration",components:{defaultSetting:w,userSetting:j},data:function(){return{settingApi:new h["SettingApi"],activeName:"defaultSetting",userSettingList:[],defaultKeys:p["d"].DEFAULT_SETTING_LIST,userConfigs:{},deleteKeys:[]}},computed:Object(l["a"])(Object(l["a"])({},Object(g["d"])({hpmConfig:function(e){return e.common.hpmConfig}})),{},{editStatus:function(){return"userSetting"===this.activeName&&this.userSettingList.some((function(e){return e.isModified}))}}),watch:{hpmConfig:{handler:function(e){this.handleRes(this.hpmConfig)},immediate:!0,deep:!0}},beforeRouteLeave:function(e,t,s){this.editStatus?this.$confirm(this.$t("core.setting.msg.cancelLea"),{closeOnClickModal:!1,type:"warning"}).then((function(){s()})).catch((function(){s(!1)})):s()},mounted:function(){this.initData()},methods:Object(l["a"])(Object(l["a"])({},Object(g["c"])({setHpmConfig:f["d"]})),{},{initData:function(){var e=this;this.activeName="defaultSetting",this.settingApi.getConfig().then((function(t){e.setHpmConfig(t.data)}))},handleRes:function(e){var t=this;this.userSettingList=Object.entries(e).filter((function(e){return!t.defaultKeys.includes(e[0])})).map((function(e,t){return{key:e[0],value:e[1],intialKey:e[0],intitalValue:e[1],isModified:!1,id:t,isKeyValid:!1,isValueValid:!1}}))},addConfig:function(){this.userSettingList.push({key:"",value:"",isModified:!0,id:this.userSettingList.length,isKeyValid:!1,isValueValid:!1})},editConfig:function(e){this.userSettingList[e].isModified=!0},deleteSuccess:function(e,t){var s=this;if(this.userSettingList.splice(t,1),this.defaultKeys.push(e),this.userSettingList.every((function(e){return!e.isModified}))){var i=Object(l["a"])(Object(l["a"])({},this.hpmConfig),this.userConfigs);this.defaultKeys.forEach((function(e){s.$delete(i,e)})),this.setHpmConfig(i),this.defaultKeys=[],this.userConfigs={}}},saveConfig:function(e,t){var s=this;return Object(o["a"])(Object(a["a"])().mark((function i(){var n;return Object(a["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,s.settingApi.saveConfig(e);case 2:n=i.sent,200===n.code&&(s.$message({message:s.$t("core.common.saveSuccess"),type:"success"}),s.userSettingList[t].isModified=!1,s.userConfigs=Object(l["a"])(Object(l["a"])({},s.userConfigs),e),s.afterSaveSuccess());case 4:case"end":return i.stop()}}),i)})))()},afterSaveSuccess:function(){if(this.userSettingList.every((function(e){return!e.isModified}))){var e=Object(l["a"])(Object(l["a"])({},this.hpmConfig),this.userConfigs);this.setHpmConfig(e),this.userConfigs={}}},isValid:function(e,t,s){this.userSettingList[e][t]=s},saveDefault:function(){this.$refs.defaultSetting.saveDefault()},cancelConfig:function(e){this.userSettingList[e].intialKey?(this.userSettingList[e].key=this.userSettingList[e].intialKey,this.userSettingList[e].value=this.userSettingList[e].intitalValue,this.userSettingList[e].isModified=!1):(this.userSettingList.splice(e,1),this.afterSaveSuccess())},beforLeave:function(){var e=this;if(this.editStatus){var t=new Promise((function(t,s){e.$confirm(e.$t("core.setting.msg.cancelLea"),{type:"warning",closeOnClickModal:!1}).then((function(){e.initData(),t()})).catch((function(e){console.log(e),s(e)}))}));return t}}})},k=$,L=(s("8120"),Object(v["a"])(k,i,n,!1,null,"e6ba3b4c",null));t["default"]=L.exports},"0bc6":function(e,t,s){"use strict";s("6610")},"15b2":function(e,t,s){"use strict";s("ca54")},6610:function(e,t,s){},8120:function(e,t,s){"use strict";s("d8bb")},ca54:function(e,t,s){},d8bb:function(e,t,s){}}]);