#!/usr/bin/env python
# -*- coding: utf-8 -*-
"""
Copyright (c) Huawei Technologies Co., Ltd. 2021-2021. All rights reserved.
Description:
Create: 2021-12-04
"""
import os
import json
import sys
import shutil


def get_install_path():
    install_path = None
    try:
        path = os.path.join(os.path.expanduser("~"), ".deveco-device-tool", "settings.json")
        with open(path, 'r', encoding="UTF-8") as f:
            path_dict = json.loads(f.read())
        if path_dict:
            install_path = path_dict.get("path")
    except FileNotFoundError:
        print(f'can not get install path, path is {install_path}')
    return install_path


def get_hpm():
    install_path = get_install_path()
    if install_path:
        if sys.platform.startswith('win'):
            return os.path.join(install_path, "core", "tool_hpm", "bin", "hpm.cmd")
        else:
            return os.path.join(install_path, "core", "tool_hpm", "bin", "hpm")
    return False


def get_node_path():
    install_path = get_install_path()
    if install_path:
        node_path = shutil.which('node')
        if node_path:
            return node_path
        else:
            print("Please install 'node' first")
    return ''
